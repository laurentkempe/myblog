---
import BlogPost from '../components/BlogPost.astro';
import BaseLayout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection("posts");
const sortedPosts = allPosts.sort((a, b) => 
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---
<BaseLayout pageTitle="My Blog">
	<ul>
		{sortedPosts.map((post) => 
            <li>
                <a href={`${post.data.permalink}`}>
                    {post.data.title}
                </a>
            </li>
		)}
	</ul>
</BaseLayout>